2025-05-07 16:46:30.366 [DEBUG] tzlocal: Looking up time zone info from registry
2025-05-07 16:46:30.369 [DEBUG] khl.command.manager: command: play added
2025-05-07 16:46:30.369 [DEBUG] khl.command.manager: command: come added
2025-05-07 16:46:30.369 [DEBUG] khl.command.manager: command: leave added
2025-05-07 16:46:30.369 [DEBUG] khl.command.manager: command: help added
2025-05-07 16:46:30.369 [DEBUG] khl.command.manager: command: wiki added
2025-05-07 16:46:30.369 [DEBUG] khl.command.manager: command: price added
2025-05-07 16:46:30.369 [DEBUG] khl.command.manager: command: sim added
2025-05-07 16:46:30.369 [DEBUG] khl.command.manager: command: hq_helper added
2025-05-07 16:46:30.370 [DEBUG] khl.command.manager: command: act_cafe added
2025-05-07 16:46:30.370 [DEBUG] khl.command.manager: command: act_diemoe added
2025-05-07 16:46:30.370 [DEBUG] khl.command.manager: command: idn added
2025-05-07 16:46:30.372 [INFO] apscheduler.scheduler: Scheduler started
2025-05-07 16:46:30.375 [DEBUG] apscheduler.scheduler: Looking for jobs to run
2025-05-07 16:46:30.375 [DEBUG] apscheduler.scheduler: No jobs; waiting until a job is added
2025-05-07 16:46:30.376 [DEBUG] asyncio: Get address info www.kaiheila.cn:443, type=<SocketKind.SOCK_STREAM: 1>, flags=<AddressInfo.AI_ADDRCONFIG: 1024>
2025-05-07 16:46:30.385 [DEBUG] asyncio: Getting address info www.kaiheila.cn:443, type=<SocketKind.SOCK_STREAM: 1>, flags=<AddressInfo.AI_ADDRCONFIG: 1024> took 15.000ms: [(<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('123.56.12.235', 443)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('47.93.10.42', 443)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('59.110.164.41', 443)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('59.110.157.125', 443)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('47.95.203.175', 443)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('101.200.41.217', 443)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('39.105.120.149', 443))]
2025-05-07 16:46:30.417 [DEBUG] asyncio: <asyncio.sslproto.SSLProtocol object at 0x06130B20> starts SSL handshake
2025-05-07 16:46:30.481 [DEBUG] asyncio: <asyncio.sslproto.SSLProtocol object at 0x06130B20>: SSL handshake took 63.0 ms
2025-05-07 16:46:30.483 [DEBUG] asyncio: <asyncio.TransportSocket fd=1688, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('192.168.100.34', 52064), raddr=('123.56.12.235', 443)> connected to None:None: (<asyncio.sslproto._SSLProtocolTransport object at 0x063DAC28>, <aiohttp.client_proto.ResponseHandler object at 0x063CE3B8>)
2025-05-07 16:46:30.594 [DEBUG] asyncio: Get address info nws.kaiheila.cn:443, type=<SocketKind.SOCK_STREAM: 1>, flags=<AddressInfo.AI_ADDRCONFIG: 1024>
2025-05-07 16:46:30.598 [DEBUG] asyncio: Getting address info nws.kaiheila.cn:443, type=<SocketKind.SOCK_STREAM: 1>, flags=<AddressInfo.AI_ADDRCONFIG: 1024> took 0.000ms: [(<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('61.240.220.8', 443)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('58.250.127.156', 443))]
2025-05-07 16:46:30.631 [DEBUG] asyncio: <asyncio.sslproto.SSLProtocol object at 0x06130D30> starts SSL handshake
2025-05-07 16:46:30.641 [DEBUG] asyncio: <asyncio.sslproto.SSLProtocol object at 0x06130D30>: SSL handshake took 15.0 ms
2025-05-07 16:46:30.641 [DEBUG] asyncio: <asyncio.TransportSocket fd=1720, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('192.168.100.34', 52066), raddr=('61.240.220.8', 443)> connected to None:None: (<asyncio.sslproto._SSLProtocolTransport object at 0x06437DA8>, <aiohttp.client_proto.ResponseHandler object at 0x064268F8>)
2025-05-07 16:46:30.801 [INFO] khl.receiver: [ init ] launched
2025-05-07 16:46:30.803 [DEBUG] khl.receiver: upcoming raw: {'s': 1, 'd': {'session_id': 'e2169d15-5a0b-4a5f-9547-7217227c584d', 'code': 0, 'sessionId': 'e2169d15-5a0b-4a5f-9547-7217227c584d'}}
2025-05-07 16:46:38.626 [DEBUG] khl.receiver: upcoming raw: {'s': 0, 'd': {'channel_type': 'GROUP', 'type': 9, 'target_id': '6764972146962199', 'author_id': '3735621924', 'content': '/hq_helper', 'extra': {'type': 9, 'code': '', 'guild_id': '6952630197979634', 'guild_type': 0, 'channel_name': 'bot', 'author': {'id': '3735621924', 'username': '传说中的勇者', 'identify_num': '2428', 'online': True, 'os': 'Websocket', 'status': 1, 'avatar': 'https://img.kookapp.cn/avatars/2022-11/eRxjayNDnr06j06j.png?x-oss-process=style/icon', 'vip_avatar': 'https://img.kookapp.cn/avatars/2022-11/eRxjayNDnr06j06j.png?x-oss-process=style/icon', 'banner': '', 'nickname': '传说中的勇者', 'roles': [], 'is_vip': False, 'vip_amp': False, 'bot': False, 'nameplate': [], 'decorations_id_map': {'nameplate': 11104, 'background': 10208, 'nameplates': [11104, 11103, 11102]}, 'is_sys': False}, 'visible_only': '', 'mention': [], 'mention_no_at': [], 'mention_all': False, 'mention_roles': [], 'mention_here': False, 'nav_channels': [], 'kmarkdown': {'raw_content': '/hq_helper', 'mention_part': [], 'mention_role_part': [], 'channel_part': [], 'spl': []}, 'emoji': [], 'preview_content': '', 'channel_type': 1, 'last_msg_content': '传说中的勇者：/hq_helper', 'send_msg_device': 1}, 'msg_id': '3fdcfeb7-7eb2-48e1-8211-4d7f99a98027', 'msg_timestamp': 1746607598291, 'nonce': 'BlrAG8OEvhZLQDiZ5xIHQBWe', 'from_type': 1}, 'extra': {'verifyToken': 'RO6KRdSFRCEeeN6i', 'encryptKey': '', 'callbackUrl': '', 'intent': -1}, 'sn': 1}
2025-05-07 16:46:38.626 [DEBUG] khl.client: upcoming pkg: {'channel_type': 'GROUP', 'type': 9, 'target_id': '6764972146962199', 'author_id': '3735621924', 'content': '/hq_helper', 'extra': {'type': 9, 'code': '', 'guild_id': '6952630197979634', 'guild_type': 0, 'channel_name': 'bot', 'author': {'id': '3735621924', 'username': '传说中的勇者', 'identify_num': '2428', 'online': True, 'os': 'Websocket', 'status': 1, 'avatar': 'https://img.kookapp.cn/avatars/2022-11/eRxjayNDnr06j06j.png?x-oss-process=style/icon', 'vip_avatar': 'https://img.kookapp.cn/avatars/2022-11/eRxjayNDnr06j06j.png?x-oss-process=style/icon', 'banner': '', 'nickname': '传说中的勇者', 'roles': [], 'is_vip': False, 'vip_amp': False, 'bot': False, 'nameplate': [], 'decorations_id_map': {'nameplate': 11104, 'background': 10208, 'nameplates': [11104, 11103, 11102]}, 'is_sys': False}, 'visible_only': '', 'mention': [], 'mention_no_at': [], 'mention_all': False, 'mention_roles': [], 'mention_here': False, 'nav_channels': [], 'kmarkdown': {'raw_content': '/hq_helper', 'mention_part': [], 'mention_role_part': [], 'channel_part': [], 'spl': []}, 'emoji': [], 'preview_content': '', 'channel_type': 1, 'last_msg_content': '传说中的勇者：/hq_helper', 'send_msg_device': 1}, 'msg_id': '3fdcfeb7-7eb2-48e1-8211-4d7f99a98027', 'msg_timestamp': 1746607598291, 'nonce': 'BlrAG8OEvhZLQDiZ5xIHQBWe', 'from_type': 1}
2025-05-07 16:46:38.627 [DEBUG] khl.requester: GET user/me: req: {'params': {}, 'headers': {}}
2025-05-07 16:46:38.627 [DEBUG] khl.ratelimiter: ratelimiter: user/me req bucket: user/me delay:  0.000s
2025-05-07 16:46:38.629 [DEBUG] asyncio: Get address info www.kookapp.cn:443, type=<SocketKind.SOCK_STREAM: 1>, flags=<AddressInfo.AI_ADDRCONFIG: 1024>
2025-05-07 16:46:38.634 [DEBUG] asyncio: Getting address info www.kookapp.cn:443, type=<SocketKind.SOCK_STREAM: 1>, flags=<AddressInfo.AI_ADDRCONFIG: 1024> took 0.000ms: [(<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('47.94.140.165', 443)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('101.200.56.5', 443)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('47.94.1.67', 443)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('47.94.234.73', 443)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('39.107.108.119', 443)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('39.106.10.67', 443)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('39.106.12.193', 443))]
2025-05-07 16:46:38.668 [DEBUG] asyncio: <asyncio.sslproto.SSLProtocol object at 0x06130CA0> starts SSL handshake
2025-05-07 16:46:38.751 [DEBUG] asyncio: <asyncio.sslproto.SSLProtocol object at 0x06130CA0>: SSL handshake took 79.0 ms
2025-05-07 16:46:38.752 [DEBUG] asyncio: <asyncio.TransportSocket fd=1796, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('192.168.100.34', 52072), raddr=('47.94.140.165', 443)> connected to None:None: (<asyncio.sslproto._SSLProtocolTransport object at 0x06445C28>, <aiohttp.client_proto.ResponseHandler object at 0x06445BF8>)
2025-05-07 16:46:38.862 [DEBUG] khl.ratelimiter: ratelimiter: user/me rsp ratelimit: bucket: user/me remaining: 239 reset: 0s
2025-05-07 16:46:38.862 [DEBUG] khl.requester: GET user/me: rsp: {'id': '2976913766', 'username': 'chad_bot', 'identify_num': '3123', 'online': True, 'os': 'Websocket', 'status': 0, 'avatar': 'https://img.kookapp.cn/assets/2025-04/L2LSTnRCP20cd0cc.jpg?x-oss-process=style/icon', 'vip_avatar': 'https://img.kookapp.cn/assets/2025-04/L2LSTnRCP20cd0cc.jpg?x-oss-process=style/icon', 'banner': '', 'nickname': 'chad_bot', 'roles': [], 'is_vip': False, 'vip_amp': False, 'bot': True, 'bot_status': 1, 'tag_info': {'color': '#0096FF', 'bg_color': '#0096FF33', 'text': '机器人'}, 'mobile_verified': True, 'is_sys': False, 'client_id': 'RGplsnA5Gqj0FLH9', 'verified': False, 'mobile_prefix': '86', 'mobile': '****', 'invited_count': 0}
2025-05-07 16:46:38.872 [INFO] khl.command.command: command hq_helper is triggered by msg: /hq_helper
2025-05-07 16:46:38.872 [DEBUG] khl.requester: POST message/create: req: {'json': {'quote': '3fdcfeb7-7eb2-48e1-8211-4d7f99a98027', 'target_id': '6764972146962199', 'content': '[{"type": "card", "size": "lg", "modules": [{"type": "section", "text": {"type": "kmarkdown", "content": "https://hqhelper.nbb.fan/#/"}, "mode": "left"}, {"type": "divider"}, {"type": "section", "text": {"type": "kmarkdown", "content": "\\u70b9\\u51fb\\u8df3\\u8f6c------------------>"}, "mode": "right", "accessory": {"type": "button", "value": "https://hqhelper.nbb.fan/#/", "click": "link", "text": "\\u8df3\\u8f6c", "theme": "primary"}}, {"type": "section", "text": {"type": "kmarkdown"}, "mode": "right", "accessory": {"type": "image", "src": "https://raw.githubusercontent.com/InfSein/hqhelper-dawntrail/master/public/icons/logo_v2_shadowed.png", "size": "sm"}}]}]', 'type': 10}, 'headers': {}}
2025-05-07 16:46:38.872 [DEBUG] khl.ratelimiter: ratelimiter: message/create req bucket: message/create delay:  0.000s
2025-05-07 16:46:40.657 [DEBUG] khl.ratelimiter: ratelimiter: message/create rsp ratelimit: bucket: message/create remaining: 239 reset: 0s
2025-05-07 16:46:40.657 [DEBUG] khl.requester: POST message/create: rsp: {'msg_id': '9727e610-3aab-4f9b-92ec-dd7e8a81e8b6', 'msg_timestamp': 1746607600316, 'nonce': '', 'not_permissions_mention': []}
2025-05-07 16:46:40.660 [DEBUG] khl.receiver: upcoming raw: {'s': 0, 'd': {'channel_type': 'GROUP', 'type': 10, 'target_id': '6764972146962199', 'author_id': '2976913766', 'content': '[{"theme":"primary","color":"","size":"lg","expand":false,"modules":[{"type":"section","mode":"left","accessory":null,"text":{"type":"kmarkdown","content":"https:\\/\\/hqhelper.nbb.fan\\/#\\/","elements":[]},"elements":[]},{"type":"divider","elements":[]},{"type":"section","mode":"right","accessory":{"type":"button","theme":"primary","value":"https:\\/\\/hqhelper.nbb.fan\\/#\\/","click":"link","text":{"type":"plain-text","emoji":true,"content":"跳转","elements":[]},"external":true,"elements":[]},"text":{"type":"kmarkdown","content":"点击跳转------------------>","elements":[]},"elements":[]},{"type":"section","mode":"right","accessory":{"type":"image","src":"https:\\/\\/img.kookapp.cn\\/assets\\/2025-05\\/9pDEPYE8UP05k05k.png","alt":"","size":"sm","circle":false,"title":"","fallbackUrl":"","elements":[]},"text":{"type":"kmarkdown","content":"","elements":[]},"elements":[]}],"type":"card"}]', 'extra': {'quote': {'id': '681b1dee8b6ef4b22e097341', 'rong_id': '3fdcfeb7-7eb2-48e1-8211-4d7f99a98027', 'type': 9, 'content': '/hq_helper', 'interact_res': None, 'create_at': 1746607598291, 'author': {'id': '3735621924', 'username': '传说中的勇者', 'identify_num': '2428', 'online': True, 'os': 'Websocket', 'status': 1, 'avatar': 'https://img.kookapp.cn/avatars/2022-11/eRxjayNDnr06j06j.png?x-oss-process=style/icon', 'vip_avatar': 'https://img.kookapp.cn/avatars/2022-11/eRxjayNDnr06j06j.png?x-oss-process=style/icon', 'banner': '', 'nickname': '传说中的勇者', 'roles': [], 'is_vip': False, 'vip_amp': False, 'bot': False, 'nameplate': [], 'decorations_id_map': {'nameplate': 11104, 'background': 10208, 'nameplates': [11104, 11103, 11102]}, 'mobile_verified': True, 'is_sys': False, 'joined_at': 1744959361000, 'active_time': 1746607598475}, 'can_jump': True, 'preview_content': None, 'kmarkdown': {'mention_part': [], 'mention_role_part': [], 'channel_part': [], 'item_part': []}}, 'type': 10, 'code': '', 'guild_id': '6952630197979634', 'guild_type': 0, 'channel_name': 'bot', 'author': {'id': '2976913766', 'username': 'chad_bot', 'identify_num': '3123', 'online': True, 'os': 'Websocket', 'status': 0, 'avatar': 'https://img.kookapp.cn/assets/2025-04/L2LSTnRCP20cd0cc.jpg?x-oss-process=style/icon', 'vip_avatar': 'https://img.kookapp.cn/assets/2025-04/L2LSTnRCP20cd0cc.jpg?x-oss-process=style/icon', 'banner': '', 'nickname': 'chad_bot', 'roles': [48234979, 47751091], 'is_vip': False, 'vip_amp': False, 'bot': True, 'nameplate': [], 'bot_status': 1, 'tag_info': {'color': '#0096FF', 'bg_color': '#0096FF33', 'text': '机器人'}, 'is_sys': False, 'client_id': 'RGplsnA5Gqj0FLH9', 'verified': False}, 'visible_only': '', 'mention': [], 'mention_no_at': [], 'mention_all': False, 'mention_roles': [], 'mention_here': False, 'nav_channels': [], 'emoji': [], 'kmarkdown': {'raw_content': 'https://hqhelper.nbb.fan/#/\n[按钮]:跳转点击跳转------------------>[图片]', 'mention_part': [], 'mention_role_part': [], 'channel_part': []}, 'editable': False, 'preview_content': 'https://hqhelper.nbb.fan/#/\n[按钮]:跳转点击跳转------------------>[图片]', 'preview_content_search': 'https://hqhelper.nbb.fan/#/\n[按钮]:跳转点击跳转------------------>[图片]', 'channel_type': 1, 'last_msg_content': 'chad_bot：https://hqhelper.nbb.fan/#/\n[按钮]:跳转点击跳转------------------>[图片]', 'send_msg_device': 0}, 'msg_id': '9727e610-3aab-4f9b-92ec-dd7e8a81e8b6', 'msg_timestamp': 1746607600316, 'nonce': '', 'from_type': 1}, 'extra': {'verifyToken': 'RO6KRdSFRCEeeN6i', 'encryptKey': '', 'callbackUrl': '', 'intent': -1}, 'sn': 2}
2025-05-07 16:46:40.661 [DEBUG] khl.client: upcoming pkg: {'channel_type': 'GROUP', 'type': 10, 'target_id': '6764972146962199', 'author_id': '2976913766', 'content': '[{"theme":"primary","color":"","size":"lg","expand":false,"modules":[{"type":"section","mode":"left","accessory":null,"text":{"type":"kmarkdown","content":"https:\\/\\/hqhelper.nbb.fan\\/#\\/","elements":[]},"elements":[]},{"type":"divider","elements":[]},{"type":"section","mode":"right","accessory":{"type":"button","theme":"primary","value":"https:\\/\\/hqhelper.nbb.fan\\/#\\/","click":"link","text":{"type":"plain-text","emoji":true,"content":"跳转","elements":[]},"external":true,"elements":[]},"text":{"type":"kmarkdown","content":"点击跳转------------------>","elements":[]},"elements":[]},{"type":"section","mode":"right","accessory":{"type":"image","src":"https:\\/\\/img.kookapp.cn\\/assets\\/2025-05\\/9pDEPYE8UP05k05k.png","alt":"","size":"sm","circle":false,"title":"","fallbackUrl":"","elements":[]},"text":{"type":"kmarkdown","content":"","elements":[]},"elements":[]}],"type":"card"}]', 'extra': {'quote': {'id': '681b1dee8b6ef4b22e097341', 'rong_id': '3fdcfeb7-7eb2-48e1-8211-4d7f99a98027', 'type': 9, 'content': '/hq_helper', 'interact_res': None, 'create_at': 1746607598291, 'author': {'id': '3735621924', 'username': '传说中的勇者', 'identify_num': '2428', 'online': True, 'os': 'Websocket', 'status': 1, 'avatar': 'https://img.kookapp.cn/avatars/2022-11/eRxjayNDnr06j06j.png?x-oss-process=style/icon', 'vip_avatar': 'https://img.kookapp.cn/avatars/2022-11/eRxjayNDnr06j06j.png?x-oss-process=style/icon', 'banner': '', 'nickname': '传说中的勇者', 'roles': [], 'is_vip': False, 'vip_amp': False, 'bot': False, 'nameplate': [], 'decorations_id_map': {'nameplate': 11104, 'background': 10208, 'nameplates': [11104, 11103, 11102]}, 'mobile_verified': True, 'is_sys': False, 'joined_at': 1744959361000, 'active_time': 1746607598475}, 'can_jump': True, 'preview_content': None, 'kmarkdown': {'mention_part': [], 'mention_role_part': [], 'channel_part': [], 'item_part': []}}, 'type': 10, 'code': '', 'guild_id': '6952630197979634', 'guild_type': 0, 'channel_name': 'bot', 'author': {'id': '2976913766', 'username': 'chad_bot', 'identify_num': '3123', 'online': True, 'os': 'Websocket', 'status': 0, 'avatar': 'https://img.kookapp.cn/assets/2025-04/L2LSTnRCP20cd0cc.jpg?x-oss-process=style/icon', 'vip_avatar': 'https://img.kookapp.cn/assets/2025-04/L2LSTnRCP20cd0cc.jpg?x-oss-process=style/icon', 'banner': '', 'nickname': 'chad_bot', 'roles': [48234979, 47751091], 'is_vip': False, 'vip_amp': False, 'bot': True, 'nameplate': [], 'bot_status': 1, 'tag_info': {'color': '#0096FF', 'bg_color': '#0096FF33', 'text': '机器人'}, 'is_sys': False, 'client_id': 'RGplsnA5Gqj0FLH9', 'verified': False}, 'visible_only': '', 'mention': [], 'mention_no_at': [], 'mention_all': False, 'mention_roles': [], 'mention_here': False, 'nav_channels': [], 'emoji': [], 'kmarkdown': {'raw_content': 'https://hqhelper.nbb.fan/#/\n[按钮]:跳转点击跳转------------------>[图片]', 'mention_part': [], 'mention_role_part': [], 'channel_part': []}, 'editable': False, 'preview_content': 'https://hqhelper.nbb.fan/#/\n[按钮]:跳转点击跳转------------------>[图片]', 'preview_content_search': 'https://hqhelper.nbb.fan/#/\n[按钮]:跳转点击跳转------------------>[图片]', 'channel_type': 1, 'last_msg_content': 'chad_bot：https://hqhelper.nbb.fan/#/\n[按钮]:跳转点击跳转------------------>[图片]', 'send_msg_device': 0}, 'msg_id': '9727e610-3aab-4f9b-92ec-dd7e8a81e8b6', 'msg_timestamp': 1746607600316, 'nonce': '', 'from_type': 1}
